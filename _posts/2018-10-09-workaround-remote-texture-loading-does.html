---
layout: post
title: 'Workaround: remote texture loading does not work with MRTK Standard Shader'
date: '2018-10-09T15:08:00.000+02:00'
orgauthor: Joost van Schaik
tags:
- HoloLens
- Windows Mixed Reality
- Unity3D
modified_time: '2018-10-10T11:01:24.202+02:00'
thumbnail: https://lh3.googleusercontent.com/-aNOhqrI_ZqQ/W7yt6SKpSFI/AAAAAAAAQGA/tobRF7sRzFwswJytgbWEZSkMUjG_KDhtACHMYCw/s72-c/image_thumb%255B2%255D?imgmax=800
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-2386281559234463756
blogger_orig_url: https://dotnetbyexample.blogspot.com/2018/10/workaround-remote-texture-loading-does.html
comment_issue_id: 313
---

<p><a href="https://lh3.googleusercontent.com/-46qHAeSrfEg/W7yt5vPWyzI/AAAAAAAAQF8/KR3Mv2G-ndItvZu7FRjqhMtsuMohGzsmQCHMYCw/s1600-h/image%255B6%255D"><img width="176" height="240" title="image" align="right" style="border: 0px currentcolor; border-image: none; float: right; display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-aNOhqrI_ZqQ/W7yt6SKpSFI/AAAAAAAAQGA/tobRF7sRzFwswJytgbWEZSkMUjG_KDhtACHMYCw/image_thumb%255B2%255D?imgmax=800" border="0"></a>This is one of those things that can cost you hours to fix and drive you completely crazy. I was working on a new improved version of my <a href="https://www.microsoft.com/en-us/hololens" target="_blank">HoloLens</a> / <a href="https://www.microsoft.com/en-us/windows/windows-mixed-reality" target="_blank">Mixed Reality</a> app <a href="https://www.microsoft.com/store/productId/9P6SVQQCP2SQ" target="_blank">AMS HoloATC</a>, and this version was using a dynamic OpenStreetMap for geographical reference. So I stole the <a href="https://localjoost.github.io/create-geographical-map-on-floor-in" target="_blank">OpenStreetMap slippy map</a> from my own work. But times have moved on, and I wanted to use the new Standard Shader from the <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity" target="_blank">Mixed Reality Toolkit</a> in stead of the Unity Standard Shader, to be able to use the cool fluent effects like the Hover Light and stuff. </p><p>Unfortunately, I not only got some fluent options that worked beautifully, but also some problems. If I used my <a href="http://localjoost.github.io/a-behaviour-for-dynamically-loading-and" target="_blank">DynamicTextureLoader</a> that I wrote about like 1.5 years ago to download map tiles from the internet, nothing happened. The texture is downloaded, applied - but it never shows up. </p><p>To show you what it looks like, I made a demo project:</p><p><a href="https://lh3.googleusercontent.com/-TYvK7nf7ZSQ/W72_0tDUIBI/AAAAAAAAQGU/OQWhXex_I-cHI4mlW_mWd3wzGjXqUcubACHMYCw/s1600-h/image%255B11%255D"><img width="640" height="232" title="image" style="margin: 0px; border: 0px currentcolor; border-image: none; display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-haEwsYv8cp0/W72_1gMG6WI/AAAAAAAAQGY/bKo4VBtMnGogwvFV9hQ50ocMaLbBXKjVQCHMYCw/image_thumb%255B4%255D?imgmax=800" border="0"></a></p><p>And as you can see on the most right picture, I got it to work as well.</p><p>The trick is in the materials. The difference is hard to spot, but one of the panels using a MRTK standard already has a dummy texture at startup:</p><p><a href="https://lh3.googleusercontent.com/-DypSBntk4iE/W72_2c18GOI/AAAAAAAAQGc/hiqJ-3XSka8soSiQRaOiQsb64MztKrX6QCHMYCw/s1600-h/image%255B16%255D"><img width="640" height="150" title="image" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-87JS5Z7WAtw/W72_3Jj1RCI/AAAAAAAAQGg/O2lMLod4JxY9R5aGWCHDzHC4nzfiJIh4QCHMYCw/image_thumb%255B7%255D?imgmax=800" border="0"></a></p><p>This is fairly easy to achieve, like this:</p><p><a href="https://lh3.googleusercontent.com/-NwvXPYupd6k/W72_39icryI/AAAAAAAAQGk/zAeJCQR3bNMsodPCplZ7_uP7vxiwyE0pACHMYCw/s1600-h/image%255B28%255D"><img width="526" height="480" title="image" style="margin: 0px; border: 0px currentcolor; border-image: none; display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-C080JfRCqyY/W72_4seetSI/AAAAAAAAQGo/l_UaczQfGxwvFPkwgrsXY_zmF_eYykx6gCHMYCw/image_thumb%255B12%255D?imgmax=800" border="0"></a></p><p>It's a file of literally one white pixel. This suggests there is <em>something</em> in the MRTK Standard Shader that look for textures at startup and if there is no texture present, subsequent changes of the texture are ignored. I don't know if it's a bug or intentional - some kind of performance optimization - but this tricks gives you textures <em>and</em> fluent stuff.</p><p>A little demo project showing this trick <a href="https://github.com/LocalJoost/TextureLoaderError" target="_blank">can be found here</a>.</p>

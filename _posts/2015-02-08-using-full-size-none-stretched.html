---
layout: post
title: Using a full-size none-stretched background image in a Xamarin.Forms app
date: '2015-02-08T17:15:00.001+01:00'
orgauthor: Joost van Schaik
tags:
- wpdev
- Windows Phone
- Xamarin Forms
- XAML
modified_time: '2015-02-11T09:11:40.202+01:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-4359812471986484878
blogger_orig_url: https://dotnetbyexample.blogspot.com/2015/02/using-full-size-none-stretched.html
---

<h2>Intro</h2> <p>I always like to use a kind of a translucent background image to my app’s screens, that makes it look a bit more professional than just a plain single-colored screen – a trick I learned from my fellow MVP <a href="http://twitter.com/mark_monster" target="_blank">Mark Monster</a> in the very early days of <a href="http://www.microsoft.com/windowsphone/?ocid=aff-n-we-loc--ITPRO40939&amp;WT.mc_id=aff-n-we-loc--ITPRO40939">Windows Phone</a> development. Now that I am trying to learn some <a href="http://xamarin.com/" target="_blank">Xamarin</a> development, I want to do the same thing – but it turns out that works a bit different from what I am used to. </p> <h2>Setting up the basic application</h2> <p>I created a Xamarin Forms portable app “BackGroundImageDemo”, but when you create a new Xamarin Forms application using the newest templates in Xamarin 3.9, you get an application that uses forms, but no XAML. Having lived and dreamed XAML for the last 5 years I don’t quite like that, so start out with making the following changes:</p> <p>1. Update all NuGet packages - this will get you (at the time of this writing) the 1.3.2 forms packages</p> <p>2. Add StartPage.Xaml to BackGroundImageDemo (Portable)</p><pre>&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BackGroundImageDemo.StartPage"&gt;
	&lt;Label Text="Hello world from XAML" VerticalOptions="Center" 
         HorizontalOptions="Center" FontSize="30" /&gt;
&lt;/ContentPage&gt;</pre>
<p>3. Make some changes to the App.cs in BackGroundImageDemo (Portable) to make it use the XAML page:</p><pre>namespace BackGroundImageDemo
{
  public class App : Application
  {
    public App()
    {
      // The root page of your application
      MainPage = new StartPage();
    }
    
    // stuff omitted
  }
}</pre>
<p>And when you run that, for instance on Windows Phone, it looks like this:</p>
<h1><a href="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_thumb.png" width="148" height="244"></a></h1>
<h2><a href="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/Jupiter.png"><img title="Jupiter" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: right; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="Jupiter" src="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/Jupiter_thumb.png" width="165" align="right" height="169"></a>Adding a background picture</h2>
<p>Now suppose I want to make an app related to astronomy – then I might use this beautiful picture of Jupiter, that I nicked off <a href="http://en.wikipedia.org/wiki/File:Jupiter_(transparent).png" target="_blank">Wikipedia</a>, as a background image:</p>
<p>It has a nice transparent background, so that will do. And guess what, the ContentPage class has a nice BackgroundImage attribute, so we are nearly done, right?</p>
<p>As per <a href="http://developer.xamarin.com/guides/cross-platform/xamarin-forms/working-with/images/" target="_blank">instructions found on the Xamarin developer pages</a>, images will need to be:</p>
<ul>
<li>For Windows Phone, in the root 
<li>For Android, in the Resources/drawable folder 
<li>For iOS, in Resources folder</li></ul>
<p>In addition, you must set the right build properties for this image:<a href="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_3.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: right; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_thumb_3.png" width="140" align="right" height="244"></a><a href="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_4.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: right; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_thumb_4.png" width="149" align="right" height="244"></a></p>
<ul>
<li>For Windows Phone, set “Build Action” to “Content” (this is default) and “Copy to Output Directory” to “Copy if newer” 
<li>For Android, this is “AndroidResource” and “Do not copy” 
<li>For iOS, this is “BundleResource” and “Do not copy”</li></ul>
<p>So I copy Jupiter.png three times in all folders (yeah I know, there are smarter ways to do that, that’s not the point here) add <strong>BackgroundImage=’'Jupiter.png”</strong> to the ContentPage tag and… the result, as we can see on the to the right, is not <em>quite</em> what we hoped for. On Android, Jupiter is looking like a giant Easter egg. Windows Phone gives the same display. On the Cupertino side, we get a different but equally undesirable effect. </p>
<h2>RelativeLayout to the rescue</h2>
<p>Using RelativeLayout and constraint expressions, we can more or less achieve the same result as Windows XAML’s “Uniform”.</p><pre>&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BackGroundImageDemo.StartPage" &gt;
  &lt;RelativeLayout&gt;
    &lt;Image Source="Jupiter.png" Opacity="0.3"
                RelativeLayout.WidthConstraint=
                  "{ConstraintExpression Type=RelativeToParent, Property=Width}"
                RelativeLayout.HeightConstraint=
                  "{ConstraintExpression Type=RelativeToParent, Property=Height}"/&gt;
    &lt;Grid RelativeLayout.WidthConstraint=
              "{ConstraintExpression Type=RelativeToParent, Property=Width}"
            RelativeLayout.HeightConstraint=
              "{ConstraintExpression Type=RelativeToParent, Property=Height}"&gt;

      &lt;Label Text="Hello world from XAML" VerticalOptions="Center"
         HorizontalOptions="Center" FontSize="30"/&gt;
    &lt;/Grid&gt;
  &lt;/RelativeLayout&gt;
&lt;/ContentPage&gt;</pre>
<p>All elements within a RelativeLayout will essentially be drawn on top of each other, unless you specify a BoundsConstraint. I don’t do that here, so essentially every object will drawn from 0,0. By setting width and height of the RelativeLayout’s children to essentially the width and height of the RelativeLayout itself, is will automatically stretch to fill the screen. And thus the image ends up in the middle, as does the Grid with the actual UI in it. Just make sure you put the image Image first and the Grid second, or else the image will appear <em>over</em> your text.</p>
<p>I also added Opacity = “0.3” to make the image translucent and not so bright that it actually wipes out your UI. The exactly value of the opacity is a matter of taste and you will need to determine how it affects the readability of the actual UI on a real device. Also, you might consider editing the image in Paint.Net or the like and set its to 0.3 opacity hard coded in the image, I guess that would save the device some work.</p>
<p>Anyway, net result:</p>
<p><a href="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_5.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_thumb_5.png" width="148" height="244"></a><a href="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_6.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_thumb_6.png" width="149" height="244"></a><a href="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_7.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Using-a-full-size-none-stretch.Forms-app_D6E8/image_thumb_7.png" width="140" height="244"></a></p>
<p>Demo solution, as always, can be downloaded <a href="https://github.com/LocalJoost/BackGroundImageDemo" target="_blank">here</a>.</p>  
---
layout: post
title: A Blendable Windows Phone 7 / Silverlight clipping behavior
date: '2011-02-11T21:34:00.001+01:00'
orgauthor: Joost van Schaik
tags:
- dotnetmag
- WP7NL
- Windows Phone 7
- Silverlight
- XAML
- Behaviour
- WP7
modified_time: '2011-04-20T11:34:57.097+02:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-1368500171044150717
blogger_orig_url: https://dotnetbyexample.blogspot.com/2011/02/blendable-windows-phone-7-silverlight.html
---

<p>If you are moving images around on a Canvas, you don’t want to show them when they get, for example, a negative Y-coordinate – for else they move outside of the Canvas and over what is above that. I’ve seen numerous examples of clipping ‘utilities’ that basically all ape <a href="http://www.codeproject.com/Articles/36495/Silverlight-ClipToBounds-Can-I-Clip-It-Yes-You-Can.aspx" target="_blank">this article on The Code Project</a>. For some reason no-one seems to have thought about making it a real behavior that can be used from Blend. So after a short discussion over Twitter and DM with Thomas Woo (aka <a href="http://twitter.com/#!/codechinchilla" target="_blank">@codechinchilla</a>) I decide to do my own take.</p>  <p>It’s not exactly rocket science:</p>  <pre>using System.Windows;
using System.Windows.Media;
using System.Windows.Interactivity;

namespace LocalJoost.Behavior
{
  public class ClipToBoundsBehavior: Behavior&lt;FrameworkElement&gt;
  {
    protected override void OnAttached()
    {
      base.OnAttached();
      AssociatedObject.SizeChanged += AssociatedObjectSizeChanged;
      AssociatedObject.Loaded += AssociatedObjectLoaded;
    }

    protected override void OnDetaching()
    {
      AssociatedObject.SizeChanged -= AssociatedObjectSizeChanged;
      AssociatedObject.Loaded -= AssociatedObjectLoaded;
      base.OnDetaching();
    }

    void AssociatedObjectLoaded(object sender, RoutedEventArgs e)
    {
      SetClip();
    }

    void AssociatedObjectSizeChanged(object sender, SizeChangedEventArgs e)
    {
      SetClip();
    }

    private void SetClip()
    {
      AssociatedObject.Clip = new RectangleGeometry
      {
        Rect = new Rect(0, 0, 
          AssociatedObject.ActualWidth, AssociatedObject.ActualHeight)
      };
    }
  }
}</pre>

<p>…and it’s even less code than the original sample. Drag this thingie in Blend on your Canvas - or whatever other framework element whose children you want to display only within its bounds - and you’re done. Or your designer is done. </p>

<p>I made this for a little <a href="http://www.microsoft.com/windowsphone/en-us/default.aspx" target="_blank">Windows Phone 7</a> App I am currently working on, but it will pretty much work in plain Silverlight, and I am pretty sure it will work on WPF (and thus <a href="http://http://www.sevensteps.com/the-new-microsoft-surface.ashx" target="_blank">Microsoft Surface</a>) as well.</p>  
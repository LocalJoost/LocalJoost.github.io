---
layout: post
title: Fixing the "Windows Mixed Reality specific camera code has been moved..." message
  when upgrading the MRKT2
date: '2020-06-03T11:28:00.001+02:00'
author: Joost van Schaik
tags:
- HoloLens
- Windows Mixed Reality
- MRTK2
- Unity3D
- HoloLens2
modified_time: '2020-06-03T11:55:51.590+02:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-8767877218946149888
blogger_orig_url: https://dotnetbyexample.blogspot.com/2020/06/fixing-windows-mixed-reality-specific.html
---

<p>A very short and very simple trick today:</p><p>If you - like me - <strike>are crazy enough to</strike> dutifully update the MRTK2 in your apps whenever a new version arrives, at some point you will notice a kind of puzzling, rather ominous and not very helpful message pop up in your console a couple of times:</p><blockquote><p>"Windows Mixed Reality specific camera code has been moved into Windows Mixed Reality Camera Settings. Please ensure you have this added under your Camera System's Settings Providers, as this deprecated code path may be removed in a future update."</p></blockquote><p>You might have seen this appear earlier, when you upgraded to MRTK 2.3, as you can see <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/commit/2ee39b763420554ccdadefaedf8e395516d43922#diff-82f03c0e8f3d624ac5a53c3a73e6c693" target="_blank">in this commit message</a>. Version 2.3 was where it was introduced, in November 2019. The trouble with this message is that the procedure to fix it is not entirely clear - at least, it was not to me. Especially since the <em>first</em> warning originates from the MRTK2 itself (when the MixedRealityCameraSystem is initialized as a service). Also GoogleBinging it yields no result, but I do hope it does so after I post this article. Fortunately it was also originating from my <em>own</em> code, and that was a lot more helpful, as I know what <em>that</em> is about - I wrote it myself, after all. </p><p>The culprit was this piece of code:</p><pre>CoreServices.CameraSystem.IsOpaque</pre><p>This ends up in Microsoft.MixedReality.Toolkit.CameraSystem.MixedRealityCameraSystem where the IsOpaque property is implemented. That looks for a "IMixedRealityCameraSettingsProvider". That does not help much, but wat does help - in MixedRealityCameraSystem&nbsp; there <a href="https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html#camera" target="_blank">is a documentation link</a> on top, which at least points you to the right <em>place</em> in the configuration.</p><p>So what you need to do is very simple and takes 7 mouse clicks:</p><ol><li>Select the MixedRealityToolkit node in your hierarchy</li><li>Select the Camera Tab</li><li>Expand the Camera Settings Provider</li></ol><p>You will now see this:</p><p><img width="640" height="354" style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20200603/01_mrcamerasystem.png" border="0"></p><p>Then:</p><ol start="4"><li>Click the "+ Add Camera Settings Provider" button just above "Display Settings"</li><li>Expand the "New data provider 0" section"</li></ol><p><img style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20200603/02_newdataprovider.png" border="0"></p><ol start="6"><li>For "Type", select Microsoft.MixedReality.Toolkit.WindowsMixedReality/WindowsMixedRealityCameraSettings (this is actually two mouse clicks)</li></ol><p><img width="640" height="263" style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20200603/03_selectcamerasettings.png" border="0"><br><br> The end result should look like this:</p><p><img style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20200603/04_done.png" border="0"></p><p>.... and you are done. Unless you need to tweak the settings of the default camera settings profile, in which case you have to do the clone-and-adapt dance. But in any case, no more scary messages about deprecated code that might change in some future release. ;)</p><p>I omitted the customary demo project this time, as the point of this post was to show you how to get from A to B, not the end result.</p>
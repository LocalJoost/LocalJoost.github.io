---

title: Reactive Extensions in Windows Phone 8 and the 2001 submission error
date: '2012-11-17T13:39:00.001+01:00'
orgauthor: Joost van Schaik
tags:
- Windows Phone 8
- Reactive
- wpdev
- dotnetmag
modified_time: '2012-11-19T08:15:27.668+01:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-2030716937111263252
blogger_orig_url: https://dotnetbyexample.blogspot.com/2012/11/reactive-extensions-in-windows-phone-8.html
---

<p>You can read the whole story if you like reading, but this whole blog post comes down to one piece of advice:</p> <p><strong><em><font size="2">If you value your sanity, do not, under any circumstances, pull in Reactive Extensions from NuGet into a Windows Phone 8 application. Use the built-in Microsoft.Phone.Reactive.dll instead.</font></em></strong>&nbsp; <p>Those who follow me on twitter may have seen a few tweets pass by over problems I had with the <a href="http://www.microsoft.com/windowsphone/?ocid=aff-n-we-loc--ITPRO40939&amp;WT.mc_id=aff-n-we-loc--ITPRO40939">Windows Phone</a> 8 version of my app <a href="http://windowsphone.com/s?appid=8b5f61a1-3ffa-df11-9264-00237de2db9e&amp;ocid=aff-n-we-loc--ITPRO40939&amp;WT.mc_id=aff-n-we-loc--ITPRO40939" target="_blank">Map Mania</a>. The submission went OK the first time, but the test team found two bugs – bugs that were also there in previous versions, but apparently they have ramped up the quality bar again. I can only applaud that, even if I got bitten by it myself, because the test report was comprehensive and showed someone actually understood or had read into some issues that may arise when using <a href="http://en.wikipedia.org/wiki/Web_Map_Service" target="_blank">WMS services</a> – and by doing so, succeeded in crashing my app. </p> <p>Anyway, I fixed the app, resubmitted, and then the trouble started. Although the Store Test kit showed no errors, and submission went fine showing only validated XAP’s – after a few minutes I got an e-mail from the Windows Phone dev center:</p> <blockquote> <p><strong>Windows Phone Dev Center app submission</strong></p> <p><strong>We weren't able to process the app submission for Map Mania. </strong> <p><strong>Unfortunately, something happened with your Windows Phone app submission. Check the status of the submission in your app list at </strong><a href="https://dev.windowsphone.com/applicationlist"><strong>https://dev.windowsphone.com/applicationlist</strong></a><strong>. If the problem persists, contact support for assistance.</strong> </p></blockquote> <p>When I looked at the submission it said I had a “2001 error” <a href="http://msdn.microsoft.com/library/windowsphone/help/jj206735(v=vs.105).aspx" target="_blank">with a helpful link</a>, that leads you to a table in which it says:</p> <blockquote> <p><strong>There are duplicate files in AppManifest.xaml. Remove one of the files and then try again.</strong>  <p><strong>If rebuilding your XAP doesn't solve this problem, you may have to manually remove any duplicate files from the AppManifest.xaml in your XAP file. To rebuild your app, see </strong><a href="http://msdn.microsoft.com/library/windowsphone/help/jj206735%28v=vs.105%29.aspx#BKMK_AppSubErr_ReBuildProject"><strong>Rebuilding your project in Visual Studio</strong></a><strong>. </strong></p></blockquote> <p>My friends, I have rebuilt the app till my fingers bled, cleaned the solution, then removed all the binaries manually, to no avail. Then I opened up the XAP to look for duplicate assemblies – there weren’t any duplicates; I scanned the AppManifest.xaml till I saw cross-eyed and didn’t find any duplicate entries there either - and after the 10th or so submit followed by automatic mail error within five minutes I gave up and indeed contacted Support.  <p>I won’t go into full detail, but I think it’s fair to say this problem wasn’t easy to solve and Support struggled as much with it as I did. Quite some mails went back and forth, and the 9 hour time zone difference didn’t exactly work favorably for a quick resolve. It wasn’t until our <a href="www.twitter.com/mahoekst" target="_blank">Dutch DPE Matthijs Hoekstra</a>, who I think now owe not only my sanity but possibly also my soul ;-), queried his sources and got back that a post-processing error apparently was being caused by System.Reactive.Core.dll and I was recommended to use Microsoft.Phone.Reactive.dll instead if possible.  <p>I finally had a possible smoking gun - my <em>own</em> port of the #<a href="http://wp7nl.codeplex.com/" target="_blank">wp7nl library</a> pulls in Reactive extensions <em>from Nuget</em>. So I removed the dependency from the library package, made a new local build, installed that into the app, compiled, uploaded and submitted, waiting for the inevitable dreaded 2001 error mail to pop up. Over an hour later, the only mail I got was from <a href="http://outlook.com/">outlook.com</a> reminding me of a birthday and the app status at the moment of this writing says “Status: In signing stage". Hallelujah!  <p>Now I don’t understand why submission went OK the first time and not the second time around. But I am very glad the issue is resolved. <u>If you use my library, please remove the references it makes to the external reactive stuff manually</u> or wait for me to publish the version that will do without. It will be out soon, I can tell you that.</p> <p><em>Update: #wp7nl was updated within a few hours of this post. If you use the Windows Phone 8 version, <u>please update to 3.0.1</u>. Should you experience problems with missing assemblies, make a manual reference to Microsoft.Phone.Reactive.dll to the projects that use wp7nl.<u> And please remove any reference to Rx* should they linger along</u>. </em></p>  
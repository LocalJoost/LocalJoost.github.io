---

title: Mixed Reality apps failing the WACK - revisited
date: '2020-01-22T07:57:00.000+01:00'
orgauthor: Joost van Schaik
tags:
- HoloLens
- HoloLens2
- Microsoft Store
- Visual Studio 2019
modified_time: '2020-01-22T07:57:22.141+01:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-3291513647731727564
blogger_orig_url: https://dotnetbyexample.blogspot.com/2020/01/mixed-reality-apps-failing-wack.html
---

<h2>Intro</h2><p>Last September I wrote <a href="http://localjoost.github.io/migrating-to-mrtk2submitting-hololens-2" target="_blank">about various hoops you had to jump through</a> to get a <a href="https://www.microsoft.com/en-us/windows/windows-mixed-reality" target="_blank">Mixed Reality</a> app to appear in the store and not have it to fail&nbsp; the Windows Application Certification Toolkit (WACK). It's time for a little update, since part of what I wrote is no longer necessary, and some things have changed subtly.</p><h2>The good news</h2><p>I wrote how you manually had to mess with Package.AppManifest.xml, particularly how you had to remove the DirectX 10 dependency to make it (still) downloadable for <a href="https://www.microsoft.com/en-us/hololens" target="_blank">HoloLens</a> 1 devices. Provided you have been diligently installing the service updates that are issued for this device, by now your HoloLens 1 should have been updated to no longer reject apps that have this requirement. So no need to take this step anymore.</p><h2>The bad news</h2><p>The trick I wrote how to make sure some unsupported DLLs were not included does not work anymore. We have to resort to more drastic measures.</p><h2>The problem</h2><p>To recap: if you generate a C++ solution from the recommended Unity version (2018.4.x, LTS branch) you get the following errors in the WACK</p><ul><li>HolographicAppRemoting.dll has failed the AppContainerCheck check.
<li>PerceptionDevice.dll has failed the AppContainerCheck check.<li>UnityRemotingWMR.dll has failed the AppContainerCheck check.</li><li>The Supported API test will list 10 errors concerning UnityRemotingWMR calling unsupported APIs
<li>The Debug configuration test will tell youUnity RemotingWMR is only built in debug mode
<li>And if you try to build for x86 or ARM, the Package sanity test will tell you HolographicAppRemoting.dll, PerceptionDevice.dll and UnityRemotingWMR.dll are only available for x64.</li></ul><p>I suggested editing the “Unity Data.vcxitems” file that is inside your store projects and change the contents of the DeploymentContent-tags for these files to false. That worked swell. Until, somewhere between Unity and Visual Studio versions upgrade, some brilliant person thought it a good idea to recreate <em>that file whenever you change the architecture</em>. So when you change the architecture from "x86" to "ARM" - <em>something that happens automatically while creating multi-platform packages</em> - you are greeted with this:</p><p><img width="640" height="417" src="https://www.schaikweb.net/blog/20200120/refresh.png"></p><p>M previous solution does not work anymore, as the three offending DLLs are automatically added <em>back</em> to the file, and thus the WACK fails again. Some more brute force is being required.</p><h2>The solution</h2><p>If you expand the Il2CppOutputProject, you can simply <em>see</em> the offending DLL's. The solution is as simple as selecting <em>and deleting them</em>.</p><p><img width="200" height="276" src="https://www.schaikweb.net/blog/20200120/culprits.png"></p><p>And then you can generate your packages, run the WACK again... and may get another failure:</p><p><img width="640" height="107" src="https://www.schaikweb.net/blog/20200120/failagain.png"></p><p>This depends on the version of the WACK you have. <a href="https://social.msdn.microsoft.com/Forums/en-US/10712943-b0be-4b83-a36a-169debd2d7b1/known-issue-windows-app-certification-kit-reports-supported-apis-test-due-to-cxxframehandler4?forum=Win10SDKToolsIssues" target="_blank">As as you can read here, the Store has been updated to ignore this error</a>. In other words, if you are down to this error, you are good to go for submission and (successful) certification in the <a href="https://www.microsoft.com/en-us/store/apps/windows" target="_blank">Windows Store</a>.</p><p>Mind you - as soon as you regenerate the solution from Unity, the project file may or may not be overwritten and you will need to repeat this. So - <em>always always</em> run the WACK before you submit - but then again, that's what you should do anyway.</p><h2>Conclusion</h2><p>The ever changing constellations of Unity and Visual Studio keep us throwing curveballs, but fortunately there's always been a way around. So far. Happy submitting!</p>
---
layout: post
title: Migrating to MRTK2 - missing Singleton and 3DTextPrefab
date: '2019-06-19T17:03:00.001+02:00'
author: Joost van Schaik
tags:
- HoloLens
- Unity
- Windows Mixed Reality
- MRTK2
- HoloLens2
modified_time: '2019-06-19T17:04:30.476+02:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-5007779519633793000
blogger_orig_url: https://dotnetbyexample.blogspot.com/2019/06/migrating-to-mrtk2-missing-singleton.html
---

<h2>Intro</h2><p>If you are migrating from the HoloToolkit to <a href="https://www.microsoft.com/en-us/windows/windows-mixed-reality" target="_blank"><a href="https://github.com/Microsoft/MixedRealityToolkit-Unity" target="_blank">Mixed Reality Toolkit</a> 2</a> 'cold turkey', as I am doing for my <a href="https://www.microsoft.com/store/productId/9P6SVQQCP2SQ" target="_blank">AMS HoloATC</a> app, a lot of things break, as I already <a href="http://dotnetbyexample.blogspot.com/2019/05/migrate-to-mrtk2-mixed-reality-toolkit.html" target="_blank">said in the first post of this series</a>. For things that you can tap, you can simply change the implementing interface from IInputClickHandler or IManipulationHandler to a couple of other interface and change the signature a bit - that's not complex, only tedious, depending on how much you have used it.</p><p>What I found really hard was the removal of the Singleton class and the 3DTextFab. I used both quite extensively. The first one I needed for like data access classes as the concept of services that was introduced in the <a href="https://www.microsoft.com/en-us/windows/windows-mixed-reality" target="_blank"><a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_release/Documentation/GettingStartedWithTheMRTK.md" target="_blank">Mixed Reality Toolkit 2</a>&nbsp;</a> was not yet available, and the other... well basically <em>all </em>my texts were 3DTextPrefabs so any kind of user feedback in text format was gone. Because so much breaks at the same time, it's very hard to step by step rebuilding your app to a working condition. Basically you have to change <em>everything</em> before something starts to work again. Since I was still learning by doing, there was no way to test if I was doing things more or less right. I got stuck, and took a radical approach.</p><h2>Introducing HoloToolkitCompatiblityPack</h2><p><img width="364" height="288" align="left" style="margin: 0px 9px 0px 0px; border: 0px currentcolor; border-image: none; float: left; display: inline; background-image: none;" src="https://www.schaikweb.net/blog/20190619/HTKCP.png" border="0">I have created a little Unity Package that contains the things that made it hard for <em>me</em> to get a step-by-step migration to the MRTK2 and christened it the HoloToolkitCompatiblityPack. It contains minimal amount of scripts <em>and meta files</em> to have Singleton and 3DTextFab working inside an MRTK2 built app. As I will be migrating more apps, I will probably update the package with other classes that I need. You can find the package file <a href="https://github.com/LocalJoost/HoloToolkitCompatiblityPack/raw/master/UnityPackage/HoloToolkitCompatiblityPack.unitypackage" target="_blank">here</a> and the project <a href="https://github.com/LocalJoost/HoloToolkitCompatiblityPack" target="_blank">here</a>. If you take your existing HoloToolkit based app, yank out the HoloToolkit, replace it by the MRTK2, then import the HoloToolkitCompatiblityPack package, you at least have to fix a few less things to at least get your app to a minimal state of function again.</p><p><br></p><h2>Caveat emptor</h2><p>Yes, of course you can use the HoloToolkitCompatiblityPack in your production app, and ship a kind of Frankenbuild using both MRTK2 and this. Do let yourself be tempted to do that. See this package as a kind of scaffolding, or a temporary beam to hold up the roof while you are replacing a bearing wall. For 3DTextFab I tend to turn a blind eye, but please don't use Singleton again. Convert those classes into services one by one. Then remove the Singleton from the HoloToolkitCompatiblityPack to make sure everything works without. This is for migration purposes <em>only.</em> </p><p>Take the high road, not the low technical debt road. </p><h2>Conclusion</h2><p>Making this package helped me forward with the migration quite a lot. I hope it helps other too. I'd love to hear some feedback on this.</p>
---
layout: post
title: Fixing the "...Unity\Tools\AssemblyConverter.exe exited with code 1" error
  when you are building your Mixed Reality app
date: '2018-05-14T18:27:00.001+02:00'
orgauthor: Joost van Schaik
tags:
- UWP
- HoloLens
- PowerShell
- Windows Mixed Reality
- Unity3D
modified_time: '2018-05-22T19:16:56.423+02:00'
thumbnail: https://lh3.googleusercontent.com/-wtth7ndzf4M/Wvm41hx1AuI/AAAAAAAAP34/Zo78ZOBJFhAjuxVNxVqb6H39jnRVvR4VgCHMYCw/s72-c/image_thumb%255B2%255D?imgmax=800
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-1691813354318150260
blogger_orig_url: https://dotnetbyexample.blogspot.com/2018/05/fixing-unitytoolsassemblyconverterexe.html
---

<h2>It's not easy being green - I mean, a Mixed Reality developer</h2><p>This is one that has annoyed me for quite some time. When developing your <a href="https://www.microsoft.com/en-us/windows/windows-mixed-reality" target="_blank">Mixed Reality</a> app, I usually go like this:</p><ul><li>Change something in Unity</li><li>Build your Mixed Reality app from Unity</li><li>Open Visual Studio</li><li>Build your app and run in your <a href="https://www.microsoft.com/en-us/hololens" target="_blank">HoloLens</a> or Immersive headset</li><li>Be not entirely satisfied with the result</li><li>Change something more in Unity</li><li>Build your Mixed Reality app again</li></ul><p>And then something like this happens:</p><p><a href="https://lh3.googleusercontent.com/-PV74FiuE92s/Wvm40cYlQ7I/AAAAAAAAP30/Ino9ZLzVDNUjQaiid1fEjOZyajGD3KqWACHMYCw/s1600-h/image%255B4%255D"><img width="644" height="268" title="image" style="display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-wtth7ndzf4M/Wvm41hx1AuI/AAAAAAAAP34/Zo78ZOBJFhAjuxVNxVqb6H39jnRVvR4VgCHMYCw/image_thumb%255B2%255D?imgmax=800" border="0"></a></p><p>An extremely unhelpful error message. If you copy the whole command in a command line and run the command yourself, you get a little more info</p><p><strong>System.Exception: Unclean directory. Some assemblies are already converted, others are not.<br>&nbsp;&nbsp;&nbsp; at Unity.SanityCheckStep.Execute()<br>&nbsp;&nbsp;&nbsp; at Unity.Step.Execute(OperationContext operationContext, IStepContext previousStepContext)<br>&nbsp;&nbsp;&nbsp; at Unity.Operation.Execute()<br>&nbsp;&nbsp;&nbsp; at Unity.Program.Main(String[] args)</strong></p><p>So here's a clue. Apparently some cruft stays behind preventing Unity from rebuilding the app the second time around. This is because Unity does not always overwrite all the files, presumably to to speed up the build process that second time. Only apparently they mess up sometimes.</p><p><a href="https://lh3.googleusercontent.com/-VeomOkfWfQ0/Wvm429YZslI/AAAAAAAAP38/EIhIk9I_jBA9JlSyRt08fQYvlhaBP0b2QCHMYCw/s1600-h/Untitled%255B8%255D"><img width="157" height="165" title="Untitled" align="right" style="border: 0px currentcolor; border-image: none; float: right; display: inline; background-image: none;" alt="Untitled" src="https://lh3.googleusercontent.com/-qZu5zNVPvDY/Wvm43vcrrkI/AAAAAAAAP4A/DjR2HgG5OB0OFgSnfAcut4rFw_wqb4siQCHMYCw/Untitled_thumb%255B4%255D?imgmax=800" border="0"></a>So then you go delete your generated app, but don't forget to retain some files you might want to keep (like your manifest file). You might add those to your repo - but then don't forget to revert after deleting, and oh yes, if you are testing on your local machine (and not your HoloLens or a different machine) you might find you can't even delete everything because it's locked. So you need to uninstall the app first. And this happens every second time you compile the app. And yes, this also happens when you use the Build Window.</p><p>Meh indeed</p><p>I never thought I would ever write this sentence, but here it goes:</p><h2>PowerShell to the rescue</h2><p>This first step you only need to do when you are testing on your development machine, and not on a HoloLens.</p><p>We&nbsp; need to find out what the actual package name of your app is. The are two ways to do this. The simplest one is going over to your package.appxmanifest, double click it, select tab "packaging" </p><p><a href="https://lh3.googleusercontent.com/-4ZypV1tmkAw/Wvm44eH7PlI/AAAAAAAAP4E/2Yf8oipvTGAsuVrzl3Up3uFlXfAC1tCWQCHMYCw/s1600-h/Untitled%255B3%255D"><img width="644" height="240" title="Untitled" style="display: inline; background-image: none;" alt="Untitled" src="https://lh3.googleusercontent.com/-4olADP2_HEk/Wvm447It6sI/AAAAAAAAP4I/CxfQ2KBhi-cMf_wJ6JQ_tq6JZPVoEcsXQCHMYCw/Untitled_thumb%255B1%255D?imgmax=800" border="0"></a></p><p>Or you can just run a PowerShell Command like this:</p><pre style="font-size: 12px;">Find name : Get-AppxPackage | Where-Object {$_ -like "*Walk*"}</pre><p>Anyway, then you can make a script, call it "CleanApp.ps1" (or whatever you want to call it) and add the following commands:</p><pre style="font-size: 12px;">Get-AppxPackage 99999LocalJoost.ThisIsMyApp | Remove-AppxPackage

$PSScriptRoot = Split-Path -Parent -Path $MyInvocation.MyCommand.Definition `<br>     Get-ChildItem -Path ${PSScriptRoot}\App\ `
    -include *.dll,*.pdb,*.winmd,*.pri,*.resw,Appx -Recurse | `
     Remove-Item -Force -Recurse</pre><p>This assumes your generated app is sitting in a directory "App" that is a sub directory of the directory that the actual script is sitting in. It typically place this in the root of my (Unity) project, while the App folder is a sub directory from that.</p><p>So your typical workflow becomes now:</p><ul><!--StartFragment-->
<li>Change something in Unity</li>
<li>Run this script</li><li>And then continue building the Mixed Reality app as you see fit (either from Unity to Visual Studio, or directly from the Build Window)</li></ul><p>I deem you all capable of copying these lines of code from this blog post, so won't put any code online to go with this article.</p><ul><!--EndFragment--></ul>
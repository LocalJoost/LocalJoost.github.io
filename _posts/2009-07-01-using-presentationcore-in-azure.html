---
layout: post
title: Using PresentationCore in Azure requires full trust
date: '2009-07-01T17:04:00.010+02:00'
orgauthor: Joost van Schaik
tags:
- Full Trust
- Azure
- dotnetmag
- MediaPermission
- PresentationCore
modified_time: '2010-04-06T11:17:29.889+02:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-7677363391870117607
blogger_orig_url: https://dotnetbyexample.blogspot.com/2009/07/using-presentationcore-in-azure.html
comment_issue_id: 23
---

Sometimes the answer is staring you in the face... I was trying to load an image from an URL in code. Imagine the code for that being something like this<pre>var blobURL = "http://www.somewhere.com/image.jpg";
var multiTileImage = new BitmapImage(); 
multiTileImage.BeginInit(); 
multiTileImage.UriSource = new Uri(blobURL);
multiTileImage.CacheOption = BitmapCacheOption.None;
multiTileImage.EndInit();</pre>This fails with an security expection, you get something like "Request for the permission of type 'System.Security.Permissions.MediaPermission failed in System.Windows.Media.Imaging.BitmapImage.EndInit"

<a href="http://bloggingabout.net/blogs/dennis/">Dennis van der Stelt</a> suggested that this may have to do something with full trust. And indeed it does. In your service definition file by default is defined<pre>&lt;WebRole name="WebRole" enableNativeCodeExecution="false"&gt;</pre>I noticed that, I just failed to see the connection between "enableNativeCodeExecution" and "full trust". In fact, I still fail to see that connection ;-) but you just need to set the value for enableNativeCodeExecution in the appropriate tag to "true" and then PresentationCore classes - with apparently are not thrustworthy - can be used from Web- or Worker roles.

---
layout: post
title: Migrating to MRTK2 - MS HRTF Spatializer missing (and how to get it back)
date: '2019-05-15T14:53:00.001+02:00'
orgauthor: Joost van Schaik
tags:
- HoloLens
- Unity
- Windows Mixed Reality
- MRTK2
- HoloLens2
modified_time: '2019-05-15T14:53:08.993+02:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-2261708869083267053
blogger_orig_url: https://dotnetbyexample.blogspot.com/2019/05/migrating-to-mrtk2-ms-hrtf-spatializer.html
comment_issue_id: 329
---

<h2>Intro</h2><p>One the many awesome (although sadly underutilized) capabilities of <a href="https://www.microsoft.com/en-us/hololens" target="_blank">HoloLens</a> is <a href="https://www.microsoft.com/en-us/research/project/spatial-audio/" target="_blank">Spatial Audio</a>. With just a few small speakers and some very nifty algorithms it allows you to connect audio to moving Holograms that sound as if they are coming <em>from </em>a Hologram . Microsoft have applied this with such careful precision that you can actually hear Holograms moving above and behind you, which greatly enhances the immersive experience in a <a href="https://www.microsoft.com/en-us/windows/windows-mixed-reality" target="_blank">Mixed Reality</a> environment. It also has some very practical uses - for instance, alerting the user something interesting is happening outside of their field of vision - and the audio also provides a clue <em>where</em> the user is supposed to look. </p><h2>Upgrade to MRKT2 ... where is my Spatializer?</h2><p>In the process op upgrading <a href="https://www.microsoft.com/store/productId/9NBLGGH52SZP" target="_blank">AMS HoloATC</a> to <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_release/Documentation/GettingStartedWithTheMRTK.md" target="_blank">Mixed Reality Toolkit 2</a> I noticed something odd. I tried - in the Unity editor - to click an airplane, that should then start to emit a pinging sound. In stead, I saw this error in the editor pop up:</p><p>"Audio source failed to initialize audio spatializer. An audio spatializer is specified in the audio project settings, but the associated plugin was not found or initialized properly. Please make sure that the selected spatializer is compatible with the target."</p><p>Then I looked into the project's audio settings (Edit/Project Settings/Audio) and saw that the Spatializer Plugin field was set to "None" - and that the MS HRTF Spatializer (that I normally expect to be in the drop down) was not even available!</p><p><img width="640" height="264" style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20191505/PluginMissing.png" border="0"></p><p>Now what?</p><h2>The smoking - or missing - gun</h2><p>The solution is rather simple. If you look in the <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity" target="_blank">Mixed Reality Toolkit</a> 2 sample project, you will notice the MS HRFT Spatializer is both available and selected. So what is missing?</p><p>Look at the Packages node in your Assets. It's all the way to the bottom. You will probably see this;</p><p><img style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20191505/PackageMissing.png" border="0"></p><p>But what you are <em>supposed</em> to see is this: </p><p><img style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20191505/PackagePresent.png" border="0"></p><p>See what's missing? Apparently the spatializer has been moved into a Unity Package. When you install the Mixed Reality Toolkit 2 and click "Mixed Reality Toolkit/Add to Scene and configure" it is <em>supposed</em> to add this package automatically (at least I think it is) - but for some reason, this does not always happen. </p><h2>Use the Force Luke - that is, the Unity Package Manager</h2><p>Fortunately, it's easy to fix. In the Unity Editor, click Window/Package Manager. This will open the Package Manager Window. Initially it will only show a few entries, but then, near the bottom, you will see "Windows Mixed Reality" appear. Hit the "Install" button top right. And when its done the Windows Mixed Reality entry will appear in the Packages will appear.</p><p><img width="640" height="459" style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20191505/PackageManager.png" border="0"></p><p>And now, if you go to Edit/Project Settings/Audio, you will see that MS HRTF Spatializer has appeared again. If this a migrated project and you have not messed with the audio settings, it will probably be selected automatically again.</p><p><img width="640" height="287" style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20191505/PluginBack.png" border="0"></p><h2>Conclusion</h2><p>No code this time, as there is little to code. I do need to add a little word of warning here - apparently these packages are defined in YourProject/Packages/manifest.json. <em>Make sure this gets added to your repo and checked in as well.</em> </p><p><img style="border: 0px currentcolor; border-image: none; background-image: none;" src="https://www.schaikweb.net/blog/20191505/manifest.png" border="0"></p>

---
layout: post
title: A behavior to animate mirroring of GUI elements on Windows Phone
date: '2013-08-21T14:01:00.001+02:00'
orgauthor: Joost van Schaik
tags:
- Windows Phone 8
- wpnl
- wpdev
- dotnetmag
- Windows Phone
- behavior
modified_time: '2013-08-21T14:01:38.572+02:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-8238637962048065628
blogger_orig_url: https://dotnetbyexample.blogspot.com/2013/08/a-behavior-to-animate-mirroring-of-gui.html
---

<p><a href="http://www.schaikweb.net/dotnetbyexample/A-behavior-to_A529/image.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: right; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" align="right" src="http://www.schaikweb.net/dotnetbyexample/A-behavior-to_A529/image_thumb.png" width="307" height="278"></a>In this third and final installment of my scaling and opacity animation series I am going to show how easy it is to build more behaviors on top of the now existing framework I wrote about in my earlier <a href="http://dotnetbyexample.blogspot.nl/2013/08/extension-methods-to-animate-scaling.html">post about extension methods for animating scales and opacity</a> and the post after that, which showed <a href="http://dotnetbyexample.blogspot.nl/2013/08/a-behavior-to-animate-folding-in-and.html" target="_blank">a behavior to animate folding in and out a GUI element</a>. </p> <p>Building on top of the extension methods from the first post and the BaseScaleBehavior of the second post, I made a second behavior called <em>MirrorBehavior.</em> In Blend, it’s property panel looks like the identical twin of UnfoldBehavior. Which is not a coincidence, as it all the properties are in it’s base class.</p> <p>It’s use case is very simple: suppose you have the completely hypothetical *cough* situation that you have created a game with the controls on the bottom of the screen or near the side of the screen – anyway, very near the back, start and search buttons of the phone. In the heat of the game they regularly strike one of those buttons – end of game. It would be nice to be able to get the controls out of the way.&nbsp; You can let people rotate the phone, but ‘’upside down” is not supported. So you have the choice of giving your users an option to either rotate or mirror the <em>playing field</em>. This is exactly what I ran into during the building of my last game – of which I am very happy to say that it has passed certification this morning and is now sitting hidden in the Store while it’s availability is being propagated to the various servers. I took the latter approach – mirroring - and this is what happening in this space invaders ‘game as well.</p> <p>Like I said, this behavior has exactly the same properties as <a href="http://dotnetbyexample.blogspot.nl/2013/08/a-behavior-to-animate-folding-in-and.html" target="_blank">Unfoldbehavior</a>. If “Activated” is true, the object to which the behavior is attached will be mirrored, if its false it is displayed normally. The rest of the properties has the same meaning as in Unfoldbehavior, so see that article for more explanation. How this behavior’s effect work out is displayed in this video.</p> <p> <div id="scid:5737277B-5D6D-4f48-ABFC-DD9C333F4C5D:543544ac-bed0-4915-b8b4-59569169a7bb" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><div><object width="448" height="277"><param name="movie" value="http://www.youtube.com/v/EEGcs-mLuM0?hl=en&amp;hd=1"></param><embed src="http://www.youtube.com/v/EEGcs-mLuM0?hl=en&amp;hd=1" type="application/x-shockwave-flash" width="448" height="277"></embed></object></div><div style="width:448px;clear:both;font-size:.8em">MirrorBehavior in action</div></div></p> <p>As you see you can also mirror horizontal and vertical at the same time, but that doesn’t make as much sense – the effect isn’t very pretty. The red background is to show the background is staying where it it – just the element (the image) to which the behavior is attached changes.</p> <p>And like Unfoldbehavior, only the two abstract methods BuildTransform and BuildStoryBoard need to be filled in. Since all the heavy lifting is already done in the previous two posts, all that remains to be written is this code:</p><pre style="font-size: 11px">using System;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Animation;
using Wp7nl.Utilities;

namespace Wp7nl.Behaviors
{
  /// &lt;summary&gt;
  /// Behaviors that mirrors an object via using an animation
  /// &lt;/summary&gt;
  public class MirrorBehavior : BaseScaleBehavior
  {
    protected override CompositeTransform BuildTransform()
    {
      return new CompositeTransform
      {
        ScaleX = (Direction == Direction.Horizontal || Direction == Direction.Both) &amp;&amp; 
                  Activated ? -1 : 1,
        ScaleY = (Direction == Direction.Vertical || Direction == Direction.Both) &amp;&amp; 
                  Activated ? -1 : 1
      };
    }

    protected override Storyboard BuildStoryBoard()
    {
      var storyboard = new Storyboard {FillBehavior = FillBehavior.HoldEnd};
      var transform = BuildTransform();
      var duration = new Duration(TimeSpan.FromMilliseconds(Duration));
      storyboard.AddScalingAnimation(
        AssociatedObject,
        AssociatedObject.GetScaleXProperty(), transform.ScaleX,
        AssociatedObject.GetScaleYProperty(), transform.ScaleY,
        duration);
      return storyboard;
    }
  }
}</pre>
<p>BuildTransform is nearly the same – only Activated is not negated, and the values runs from –1 to 1 in stead from 0 to 1. That’s the only trick involved – scaling to –1 ín XAML mirrors an object. Life can be so simple. BuildStoryBoard is even more the same as in UnfoldBehavior, only it now only animates the scale, and not the opacity.</p>
<p>That is all there is to it this time. Stay tuned for my game using this code – and ore that I still have to blog about - which is scheduled for release on Friday August 23, 8pm (or 20:00) CET.</p>
<p><a href="http://www.schaikweb.net/dotnetbyexample/MirrorBehaviorDemo.zip" target="_blank">Demo solution, as always, can be found here.</a></p>  
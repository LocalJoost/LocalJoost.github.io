---
layout: post
title: Windows 10 maps part 1 - setting up
date: '2015-08-09T14:23:00.001+02:00'
author: Joost van Schaik
tags:
- UWP
- Mapping
- Windows 10
modified_time: '2016-12-09T17:19:53.609+01:00'
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-3734372100495435426
blogger_orig_url: https://dotnetbyexample.blogspot.com/2015/08/windows-10-maps-part-1-setting-up.html
---

<p><font size="4">Intro</font><br>Ever after my <a href="http://www.microsoft.com/netherlands/techdays/" target="_blank">TechDays</a> 2015 talk I have been getting a lot of questions about the new Universal Windows App map control for&nbsp; <a href="http://www.windows.com" target="_blank">Windows 10</a>, and now the launch is done and the "getting things done" mind set (the very point of Windows anyway) is setting in, I have decided to make some time to write down how to get things done indeed - with the said map control.</p> <p>To prevent this becoming an insanely huge post that will take forever to complete (and read) this is going to be a seven part series.</p> <ol> <li>Setting up  <li><a href="http://dotnetbyexample.blogspot.com/2015/08/windows-10-maps-part-2-manipulation-and.html" target="_blank">Manipulation and drawing</a>  <li><a href="http://dotnetbyexample.blogspot.com/2015/08/windows-10-maps-part-3-querying-map.html" target="_blank">Querying the map &amp; attaching business objects to map shapes</a>  <li><a href="http://dotnetbyexample.blogspot.com/2015/08/windows-10-maps-part-4-color-scheme-and.html" target="_blank">Theme &amp; Options</a>  <li><a href="http://dotnetbyexample.blogspot.com/2015/09/windows-10-maps-part-5-styles-and-3d.html" target="_blank">Styles &amp; 3D</a>  <li><a href="http://dotnetbyexample.blogspot.com/2015/10/windows-10-maps-part-6-scenes-and-camera.html" target="_blank">Scenes &amp; camera</a>  <li><a href="http://dotnetbyexample.blogspot.com/2015/10/windows-10-maps-part-7-using-external.html" target="_blank">Using external maps with TMS/WMS</a></li></ol> <p>During the blog series I will refer to a <a href="https://github.com/LocalJoost/Manipulation_Drawing" target="_blank">sample app</a> that I have published on GitHub already.</p> <p>By the way: this may not become a continuous series: it's very well possible some stuff gets published in between, as I am currently very much exploring the Windows 10 <a href="http://ms-iot.github.io/content/en-US/GetStarted.htm" target="_blank">CoreIot</a> stuff and plan to write about that as well.</p> <p><font size="4">Getting a key</font><br>During the course of the various versions of Windows and <a href="http://www.microsoft.com/windowsphone/?ocid=aff-n-we-loc--ITPRO40939&amp;WT.mc_id=aff-n-we-loc--ITPRO40939">Windows Phone</a> development we needed some key of a kind. Where we needed to get that varied over time and platform, but we now have one <a href="http://www.windows.com" target="_blank">Windows</a> thus one place to get the key: the <a href="https://www.bingmapsportal.com/" target="_blank">Bing Maps dev portal</a>. You login to that portal using your Microsoft account, Truth to be told, it's not the most beautiful nor the most intuitive of sites I have ever seen, and the only service announcement dating back to February 2015 makes it feel a bit like an abandoned site, but it is the real McCoy and it does the trick.</p> <p>You click "My account"&nbsp; and then "Create or view keys"</p> <p><a href="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image_thumb.png" width="502" height="320"></a><br>This will take you to this screen where you can see your existing keys, and create new ones. Curiously it's not possible to delete keys.</p> <p><a href="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image_3.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image_thumb_3.png" width="644" height="369"></a><br>When you click "here" in "click <u><font color="#0080ff">here</font></u> to create a new key" this will give you the following popup</p> <p><a href="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image_4.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image_thumb_4.png" width="294" height="300"></a><br>You can leave the Application URL box empty. Important is that you select "Universal Windows App". Fill in the name, and leave the Key type to "Basic" - at the time of writing this it was the only choice anyway. The result will be a rather long affair - the keys I have created are 220 characters long. </p> <p><font size="4">Use your key in code or XAML </font><br>There are actually two ways of putting your key to work: you can do it in XAML, or from code. In XAML it can only done by using a map control like this:</p><pre> &lt;maps:MapControl x:Name="MyMap" MapServiceToken="Your mapkey goes here" /&gt;</pre>
<p>By the way, the easiest way to get a map control on your app <em>and</em> get all the name spaces set up correctly is by dragging it onto the design surface, either in Visual Studio or in Blend.</p>
<p>The other way of getting this done is by using code. </p><pre>Windows.Services.Maps.MapService.ServiceToken ="Your mapkey goes here" </pre>
<p>Put this for instance in the constructor in App.xamls.cs. If you have done it right, you won't see any of the pesky labels indicating you have an incorrect key. If it look like this:</p>
<p><a href="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image_5.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/Windows-10-mapping---setting-up-manipula_C45F/image_thumb_5.png" width="644" height="459"></a><br>... you might want back to square one and see what you missed.</p>
<p><font size="4">A few things to consider / keep in mind</font></p>
<ul>
<li>As far as I understand, you cannot reuse keys from earlier type of apps, even not when you are submitting a new version of an existing app that is already in the Store. You have to create a new one for your Windows 10 submission. 
<li>Bing maps keys are free for consumer-facing, education, and non-profit applications and for some business scenarios as well, but not in all cases, and not without limits.<strong> Be sure to study <a href="http://www.microsoft.com/maps/create-a-bing-maps-key.aspx" target="_blank">this page</a></strong> to make sure you create the right kind of key. If you are building a large enterprise app or an app that goes totally viral and pulls a lot of maps data, you might need an enterprise key and those are definitely not free. 
<li>Be aware of the fact that things like geocoding (finding an address based upon a location), reverse geocoding and routing also hit the map engine, so if you don't use a map but for instance want to do a simple 'find the ZIP code for this location app' you will need a Bing maps key as well. And unlike the map,that shows you a friendly warning that your MapServiceToken is not specified (like displayed above) but keeps functioning otherwise, the geocoding and routing api's simply will throw an exception when your key is not valid 
<li>If you come from Windows Phone 8.1, this may seem like the exact same control at first glance. <em>It is not</em>. Do not fall in that trap. It's a complete new control sitting in a new namespace:&nbsp; Windows.UI.Xaml.Controls.Maps.MapControl </li></ul>
<p>Stay tuned for more mapping. And get the <a href="https://github.com/LocalJoost/Manipulation_Drawing" target="_blank">sample app</a> if you are impatient ;)</p>
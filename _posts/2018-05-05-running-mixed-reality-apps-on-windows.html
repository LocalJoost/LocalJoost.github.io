---
layout: post
title: Running Mixed Reality apps on Windows 10 on ARM PCs–get ready for a surprise
date: '2018-05-05T11:26:00.000+02:00'
author: Joost van Schaik
tags:
- ARM
- UWP
- Windows Mixed Reality
- Unity3D
modified_time: '2018-05-05T11:26:40.711+02:00'
thumbnail: https://lh3.googleusercontent.com/-baPUDKuo1AY/Wu14kJ4pzRI/AAAAAAAAPys/YlkRz62almYlQnv0vND-xTDIRkG-fMAJgCHMYCw/s72-c/IMG_6845_2_thumb%255B2%255D?imgmax=800
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-1450734808442515705
blogger_orig_url: https://dotnetbyexample.blogspot.com/2018/05/running-mixed-reality-apps-on-windows.html
---

<h2>Intro</h2><p>I was planning to write a step-by-step procedure of the things you would need to do to get the <a href="https://www.microsoft.com/en-us/windows/windows-mixed-reality" target="_blank">Mixed Reality</a> app I created in my previous post to work on a Windows 10 on ARM PC. After all, <a href="http://dotnetbyexample.blogspot.com/2016/10/running-hololens-app-on-raspberry.html" target="_blank">when I tried to do that on a Raspberry PI2</a> quite some time ago, there was some creative slashing necessary. </p><h2>Life is what happens while you are busy making other plans</h2><p>Turns that what I needed to do was exactly nothing. Well, I had to compile and deploy it for ARM. And that worked. Just like that, just like on a intel-based PC <a href="http://dotnetbyexample.blogspot.com/2018/05/running-your-mixed-reality-app-on.html" target="_blank">as I described in my previous post</a>. When I deployed Walk the World to the Windows 10 on ARM PC <a href="http://dotnetbyexample.blogspot.com/2018/04/for-crying-out-loud-compile-for-native.html" target="_blank">some posts ago</a>, I still had to remove some parts of the <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity" target="_blank">Mixed Reality Toolkit</a> to make the ARM tools swallow the sources. Apparently, that’s no longer necessary.</p><p>And then I tested it. And I learned I had to make some changes to my code after all. I think Microsoft likes to hear that you can run code on Windows 10 on ARM PCs <em>unchanged,</em> but in this case I don’t think they will mind me saying this I actually needed to make some changes because it was running <em>too bloody fast</em> on a Windows 10 on ARM PC. Yeah, you read that right. The code I wrote for <a href="http://dotnetbyexample.blogspot.com/2018/05/running-your-mixed-reality-app-on.html" target="_blank">controlling the app via an Xbox One Controller</a> replied so fast it was actually nearly impossible to control the view point, especially when rotating. Even when I compiled it for x86 and <a href="https://channel9.msdn.com/Events/Build/2017/P4171?ocid=player" target="_blank">CHPE</a> had to do the translation, it still ran too fast for reasonable control.</p><p>It actually ran faster than on my i7 Surface Pro 4. That was one serious WTF, I can tell you that.</p><h2>One trigger, two triggers</h2><p>You might remember that in the previous post I used the right trigger to make moving and rotating go faster. Well we sure don’t need to go <em>faster</em>, so I adapted the code to calculate the speed up factor:</p><pre style="font-size: 12px;">var speed = 1.0f + TriggerAccerationFactor * eventData.XboxRightTriggerAxis;
</pre><p>To use the <em>right</em> trigger to <em>slow down</em> the speed. </p><pre style="font-size: 12px;">var speed = (1.0f + TriggerAccerationFactor * eventData.XboxRightTriggerAxis) - 
            (eventData.XboxLeftTriggerAxis * 0.9f);</pre><p>And that works reasonably well.</p><p>Now I made a setup quite comparable to my <a href="http://dotnetbyexample.blogspot.com/2018/04/for-crying-out-loud-compile-for-native.html" target="_blank">previous post on Windows 10 on ARM</a>, only now the x86/ARM versions are not only compared with each other, but also with an x64 version running on my Surface Pro 4.<a href="https://lh3.googleusercontent.com/-A_8y6_O5uaE/Wu14jQNkZzI/AAAAAAAAPyo/SH_PrH3xZjo1KFRmlA6FInLF-UYp7BsHgCHMYCw/s1600-h/IMG_6845_2%255B4%255D"><img width="640" height="427" title="IMG_6845_2" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" alt="IMG_6845_2" src="https://lh3.googleusercontent.com/-baPUDKuo1AY/Wu14kJ4pzRI/AAAAAAAAPys/YlkRz62almYlQnv0vND-xTDIRkG-fMAJgCHMYCw/IMG_6845_2_thumb%255B2%255D?imgmax=800" border="0"></a></p><p>The Surface Pro 4 for is running on his own screen and is connected to the right Xbox Controller and the gray ArcMouse, the Windows 10 on ARM PC, once again missing from this picture, is connected to the black ArcMouse, and Dell monitor and the left Xbox Controller <a href="http://dotnetbyexample.blogspot.com/2018/03/windows-10-on-arm-and-deviceshang-on-to.html" target="_blank">via the Continuum dock</a> that you can see just in front of the MVP thermos.</p><p>So here’s a little video of the three versions:</p><iframe width="650" height="365" src="https://www.youtube.com/embed/GfpxogfbOt8" frameborder="0" allowfullscreen="" allow="autoplay; encrypted-media"></iframe><p>You can clearly see the the Windows on ARM10 PC is quite a bit faster than the Surface Pro 4 and that even the x86 CHPE-fied version is faster, so that rotating indeed needs the left trigger to slow it down, to get some resemblance of control. At the end, you can actually seen them all three together</p><p><a href="https://lh3.googleusercontent.com/-hSPKpputrZQ/Wu14kySCJDI/AAAAAAAAPyw/fHlHZRueMWM-Fxq0HI1dmSiYA8uTNLI2QCHMYCw/s1600-h/IMG_6852_3%255B4%255D"><img width="640" height="427" title="IMG_6852_3" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" alt="IMG_6852_3" src="https://lh3.googleusercontent.com/-V2DiqXAkqCk/Wu14lhwUbPI/AAAAAAAAPy0/z1ZaLcFsL3kXnT19MT7YL3zrGdiP52bHACHMYCw/IMG_6852_3_thumb%255B2%255D?imgmax=800" border="0"></a></p><p>The difference between the x86 and the ARM version is mainly in startup time here and a wee bit of general performance (although you mainly notice that when you actually operate the app – if you just watch it’s less obvious). <a href="http://dotnetbyexample.blogspot.com/2018/04/for-crying-out-loud-compile-for-native.html" target="_blank">Last time I wrote about Windows 10 on ARM</a> I already concluded that CHPE does an amazing job as far as graphics performance goes, and it shows here again.</p><p><img width="300" height="92" align="right" style="float: right; display: inline;" alt="[image%5B22%5D]" src="https://lh3.googleusercontent.com/-tfngJVrmmqE/WunN5cgmouI/AAAAAAAAPxk/xvitsxQrnx0YHfVrGVAtoFF-DV57LrcTwCHMYCw/s1600/image%255B22%255D" border="0">Interesting detail – the Windows 10 on ARM PC does not show this popup a the end, while the Surface Pro 4 does. Now this may be because Windows x64 actually has the optional “Windows Mixed Reality” component (although this particular <em>hardware </em>doesn’t support that), and Windows 10 on ARM does not have that particular component. Also, the latter still runs the Fall Creators Update, while the Surface Pro 4 runs the April 2018 update. Both may be a factor. I have no way to test this now.</p><h2>Two versions of the same app?</h2><p>You might have noticed this before - I sometimes run two versions of the same app together on one PC. That's normally not possible - if you deploy one version it gets overwritten by the other, even when you change target architecture in Visual Studio. To get two version of the same app to run of one computer, you will need to fiddle somewhat in the Package.appmanifest. Open it as XML file (not via the beautiful GUI editor provided by Visual Studio). Change the Name in Identity (3rd line in the file) </p><pre style="font-size: 12px;">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br>
&lt;Package xmlns:....<br>&nbsp;&nbsp; &lt;Identity Name="XBoxControllerDemo" Publisher="CN=DefaultCompany" Version="1.0.0.0" /&gt;</pre><p>and change XBoxControllerDemo for instance to XBoxControllerDemoARM</p><p>Then look a bit lower for the VisualElements tag</p><pre style="font-size: 12px;">&lt;uap:VisualElements DisplayName="XBoxControllerDemo"</pre><p>And change that to for instance "XBoxController ARM Version" - to make sure the app also have separate icon labels.</p><p><em>Do not ever do this on production apps</em> but if you want to you your own kind of crazy A-B testing like me it can be useful.</p><h2>Conclusion</h2><p>This article is quite a bit shorter than I anticipated, but that it’s because <a href="https://www.microsoft.com/en-us/store/collections/MR-All-ImmersiveContent" target="_blank">Mixed Reality apps</a> seem to run amazingly well on Windows 10 on ARM PCs with very little work. This platform is a serious candidate for Unity generated UWP apps.</p><p>I am now seriously considering rebuilding my Mixed Reality apps with this new MRTK and the newest applicable version of Unity, and including an ARM package in the store. Why not. It runs fine. Let's see if users like it.</p><p>No (new) project this time. You can find the project <a href="https://github.com/LocalJoost/XBoxControllerDemo.git" target="_blank">with the updated XBoxControllerAppControl.cs (still) here</a>.</p>
---

title: Fix for “could not connect to the debugger” while deploying Xamarin Forms apps
  to the Visual Studio Android Emulator
date: '2016-02-20T10:06:00.000+01:00'
orgauthor: Joost van Schaik
tags:
- Xamarin Forms
- Xamarin
- Android
- Emulator
modified_time: '2016-02-22T06:50:22.749+01:00'
thumbnail: https://lh3.googleusercontent.com/-_E2CCJR6xGw/Vsgvll8Ny2I/AAAAAAAANfs/3DIcWt-vlEA/s72-c/image_thumb%25255B1%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-5295746446529817470.post-711002041085962487
blogger_orig_url: https://dotnetbyexample.blogspot.com/2016/02/fix-for-could-not-connect-to-debugger.html
---

<p>While I was busy developing a cross-platform application for Windows Phone, Android and iOS I wanted to test the Android implementation and ran into a snare – I could no longer debug on the emulator. This kept me puzzled for a while, and only with the combined help of my fellow MVPs <a href="https://twitter.com/mayur_tendulkar" target="_blank">Mayur Tendelkar</a> and <a href="https://twitter.com/tomverhoeff" target="_blank">Tom Verhoeff</a>, who both had pieces of the puzzle, I was able to finally get this working.</p> <p>As you try to deploy an app to the Visual Studio Android emulator, symptoms are as follows:</p> <ul> <li>The app is deployed  <li>The app starts on the emulator  <li>It <em>immediately stops</em>  <li>You get one or more of the following messages in your output window:</li></ul> <p><strong>AOT module 'mscorlib.dll.so' not found: dlopen failed: library "/data/app/&lt;your app name&gt;.Droid-1/lib/x86/libaot-mscorlib.dll.so" not found</strong></p> <p><strong>Android application is debugging.<br>Could not connect to the debugger.</strong>  <p>This actually even happens when you do File/New Project and run, which is very frustrating. Oddly enough, when you start the deployed app on the emulator by clicking on it, it runs fine. The issue is solely the debugger not being able to connect.  <p>The first error – the missing libaot-mscorlib.dll.so, which is usually hidden in a plethora of messages - is easy to fix: disable Android fast deployment. Go to the properties of the Android project, hit tab “Android options”, and unselect “Use Fast Deployment” </p> <p><a href="http://www.schaikweb.net/dotnetbyexample/ccb49cb27d7f_895F/image.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.schaikweb.net/dotnetbyexample/ccb49cb27d7f_895F/image_thumb.png" width="640" height="310"></a></p> <p>That will usually take care of the libaot-mscorlib.dll.so issue. Not an obvious thing to do, but hey, that’s almost nothing in our field. But still my <em>debugger</em> would not connect. The solution to that takes the following steps, which are even less obvious:</p> <ul> <li>Start the Hyper-V manager  <li>Select the emulator you are trying to use  <li>Right-click, hit settings</li></ul> <p><a href="https://lh3.googleusercontent.com/-Xr-VBq5y-9A/VsgvlQpC5yI/AAAAAAAANfo/O4RUccSgFUo/s1600-h/image%25255B3%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-_E2CCJR6xGw/Vsgvll8Ny2I/AAAAAAAANfs/3DIcWt-vlEA/image_thumb%25255B1%25255D.png?imgmax=800" width="633" height="484"></a></p> <ul> <li>Click processor  <li>Click Compatibility  <li>Click checkbox “Migrate to a physical computer with a different processor version”</li></ul> <p><a href="https://lh3.googleusercontent.com/-twqDjT8NPKA/VsgvmE91G4I/AAAAAAAANfw/ekB7AiCMsxE/s1600-h/image%25255B9%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-RM6QqrtYw9s/VsgvmjMS3uI/AAAAAAAANf0/4oFeGbs3hzw/image_thumb%25255B5%25255D.png?imgmax=800" width="508" height="484"></a></p> <p>And of course, once you know <em>that,</em> you can find people have encountered this problem before, like here <a href="https://social.msdn.microsoft.com/Forums/en-US/f92bb80e-bf32-42f8-bd2c-2c7b8f9e840b/visual-studio-emulator-for-android-issues?forum=visualstudiogeneral" target="_blank">in the MSDN forums</a>, on <a href="http://stackoverflow.com/questions/29547546/visual-studio-android-emulator-will-not-start-fully" target="_blank">Stackoverflow</a> or even <a href="https://blogs.msdn.microsoft.com/visualstudioalm/2015/11/06/visual-studio-emulator-for-android-release-notes/" target="_blank">here in comments on the release notes of the emulator</a>. The fact that the solution is hard to find with only the error message made me decide to write a blog post about it anyway.</p> <p>This issue only seems to be occurring on the newer generation of processors, which explains why I never saw it before – I ran this on a brand new <a href="https://www.microsoft.com/surface" target="_blank">Surface Pro</a> 4, where I used to run the emulators on my big *ss desktop PC, whose i7 processor dates back to 2011. It’s one of ye good olden 970 3.20 Ghz monsters, from the time power efficiency was not quite very high on the Intel agenda yet ;) It’s the 1939 Buick Hot Rod of the i7’s, but as a bonus, I never have to turn on the heating in the study on cold winter days :) </p> <p>By the way, if the android emulator seems to be stuck in&nbsp; the “preparing” phase, you might want to check if you have internet connection sharing enabled – it does not seem to like that either.</p> <p>Thanks Mayur and Tom, you have been a great help, as always.</p>